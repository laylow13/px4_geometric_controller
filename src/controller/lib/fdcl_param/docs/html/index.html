<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>FDCL Param Class: FDCL Param Class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gw.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FDCL Param Class
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FDCL Param Class </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library provides a C++ tool to read parameters from a text file, or save them to a text file.</p>
<p><a class="anchor" id="contents"></a> </p><h2>Contents</h2>
<ol type="1">
<li><a href="#intro">Basic Introduction</a></li>
<li><a href="#using-the-class">Using the Class</a></li>
<li><a href="#contributing">Contributing</a></li>
</ol>
<p><a class="anchor" id="intro"></a> </p><h2>Basic Introduction</h2>
<h3>Configuration File</h3>
<p>The format of the compatible text file is illustrated by the following sample file saved as <code>fdcl.cfg</code></p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;UAV:</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; m: 2.5</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; J: 3, 0, 0,  0, 2, 0,  0, 0, 1</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Control:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; kR: 1.8</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; kW: 2.0</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;IMU:</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; dev: &quot;/dev/tty&quot;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;I2C:</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; dev: &quot;/dev/i2c&quot;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; addr: 50</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;GPS:</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; available: 1</div></div><!-- fragment --><p>The name of the parameter is composed of the group name, and the variable name. For example, in the above file, <code>UAV</code> is the group name and <code>m</code> is the variable name.</p>
<p>More precisely, if the new line begins with letters without any space, the letters before <code>:</code> are considered as the <b>group</b>. Or, if the new line begins with <code>space</code> (<code>tab</code> works too), the the letters between <code>space</code> and <code>:</code> are considered as the <b>variable</b>.</p>
<p>The parameter name is constructed by concatenating <b>group</b> and <b>variable</b>. Note that the <b>variable</b> names can be repeated if they do not belong to the same <b>group</b>.</p>
<p>The followig types are suppored for the parameter value:</p><ol type="1">
<li>bool (0: false, 1: true)</li>
<li>double</li>
<li>integer</li>
<li>string (nested in " ")</li>
<li>Eigen double matrix of an arbitrary size</li>
</ol>
<p>Note the string parameter should be nested in <code>" "</code>. For an eigen matrix, each row is concetanted in a single line, where each element is separated by <code>,</code> For example, in the above configuration file, the 3x3 matrix J is defined as</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;J = [ 3 2 1; </div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;      0 2 0;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;      0 0 1];</div></div><!-- fragment --><p> in the Matlab notation.</p>
<h3>Usage</h3>
<p>The usuage of the library is illustrated by the following sample code.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#include &lt;iostream&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#include &lt;string&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;#include &quot;Eigen/Dense&quot;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;#include &quot;fdcl/param.hpp&quot;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;using namespace std;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;int main(void)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    // define variables to store the variables read from</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    // the config file</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    double m;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    string dev;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    int addr;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    Eigen::Matrix&lt;double, 3, 3&gt; J;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    bool GPS;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    // initialize the FDCL param class  </div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    fdcl::param cfg;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    // open the config file</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    cfg.open(&quot;fdcl.cfg&quot;);</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    // read variables</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    // Note: the **group** name and the **variable** name are </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    // joined with `.` in between. </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    cfg.read(&quot;UAV.m&quot;,m);</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    cout &lt;&lt; &quot;m=&quot; &lt;&lt; m &lt;&lt; endl;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    cfg.read(&quot;UAV.J&quot;,J);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    cout &lt;&lt; &quot;J=&quot; &lt;&lt; J &lt;&lt; endl;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    cfg.read(&quot;IMU.dev&quot;,dev);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    cout &lt;&lt; &quot;dev=&quot; &lt;&lt; dev &lt;&lt; endl;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    cfg.read(&quot;GPS.available&quot;,GPS);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    cout &lt;&lt; &quot;GPS=&quot; &lt;&lt; GPS &lt;&lt; endl;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    // update variables already in the config file</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    cfg.save(&quot;I2C.addr&quot;,50);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    cfg.read(&quot;I2C.addr&quot;,addr);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    cout &lt;&lt; &quot;addr=&quot; &lt;&lt; addr &lt;&lt; endl;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    cfg.save(&quot;GPS.available&quot;,true);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    cfg.read(&quot;GPS.available&quot;,GPS);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    cout &lt;&lt; &quot;GPS=&quot; &lt;&lt; GPS &lt;&lt; endl;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    // close the config file</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    cfg.close();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div></div><!-- fragment --><h3>Using Eigen Matrices</h3>
<p>The package supports Eigen matrices for save and read functions, which are declared as template functions. Therefore, those functions must be explicitly instantiated according to the particular type of the Eigen matrices used.</p>
<p>For example, the above example uses the Eigen marix type <code>Eigen::Matrix&lt;double, 3, 3&gt;</code>, and at the end of <code>fdcl_param.cpp</code> the following explicit istantiattion are included:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;template void fdcl_param::read(const string param_name, Eigen::MatrixBase&lt; Eigen::Matrix &lt;double,3,3&gt; &gt;&amp; M);</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;template void fdcl_param::save(const string param_name, Eigen::MatrixBase&lt; Eigen::Matrix &lt;double,3,3&gt; &gt;&amp; M);</div></div><!-- fragment --><p>When using other types or sizes of Eigen matrices, the corresponding instantiations must be included at the end of <code>param.cpp</code></p>
<h3>What it does NOT do</h3>
<ul>
<li>Save function does NOT add a new entry to the configuration text file. When the save function is called, the parameter must alred exist in the text file.</li>
<li>No comment support in the configuration text file.</li>
</ul>
<p><a href="#contents">back to content</a></p>
<p><a class="anchor" id="using-the-class"></a> </p><h2>Using the Class</h2>
<p>To add this to class to your code, using CMake and cloning it as a git submodule is recommended. This instructions assumes that you are going to add your submodules to a directory named <code>libraries</code> in the main project directory. If your submodule directory is different, make sure to change the path wherever it says <code>libraries</code>. First, add this as a submodule in git.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &#39;main/project/dir&#39;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;git submodule add https://github.com/fdcl-gwu/fdcl_param.git ./libraries/fdcl_param</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;git submodule update --init --recursive</div></div><!-- fragment --><p>NOTE: Whenever you clone your main project, you must recursively update the submodules: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git submodule update --init --recursive</div></div><!-- fragment --><p>Now, in the main project's CMake file (CMakeLists.txt), do the followings: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;include_directories(${PROJECT_SOURCE_DIR}/libraries/fdcl_param/include)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;add_subdirectory(${PROJECT_SOURCE_DIR}/libraries/fdcl_param fdcl_param)</div></div><!-- fragment --><p>Also, whenever you make a file that uses fdcl_param class, add <code>fdcl_param</code> to the linker: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;target_link_libraries(name/of/the/library/or/exec</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    PRIVATE fdcl_param</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;)</div></div><!-- fragment --><p>Then, you can simply call <code>#include "fdcl/param.hpp"</code> in your source/header files in the main directory.</p>
<p><a href="#contents">back to content</a></p>
<p><a class="anchor" id="contributing"></a> </p><h2>Contributing</h2>
<ul>
<li>Anyone is welcome to contribute, but make sure you follow the existing coding style.</li>
<li>Make sure to document all your changes/additions with Doxygen style comments.</li>
</ul>
<h3>Generating the Documentation</h3>
<p>Document generation is done with Doxygen If you do not have Doxygen, install it first </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install -y doxygen graphviz</div></div><!-- fragment --><p>Use Doxygen to generate the documentation </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd docs/Doxygen</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;doxygen Doxygen</div></div><!-- fragment --><p>This will generate the documentation. Commit and push to update the online documentation. <a href="#contents">back to contents</a></p>
<p><a href="#contents">back to content</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
